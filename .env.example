# ===========================================
# Mohe Platform - Environment Configuration
# ===========================================
# IMPORTANT: Copy this file to .env and fill in your actual values
# DO NOT commit .env file to git (already in .gitignore)

# ===========================================
# Database Configuration
# ===========================================
# Database connection settings
DB_HOST=100.99.236.50
DB_PORT=16239
DB_NAME=mohe_db
DB_USERNAME=mohe_user
DB_PASSWORD=mohe_password

# Docker-specific PostgreSQL settings
POSTGRES_DB=mohe_db
POSTGRES_USER=mohe_user
POSTGRES_PASSWORD=mohe_password
POSTGRES_PORT=5432

# ===========================================
# Service Ports
# ===========================================
BACKEND_PORT=8080
FRONTEND_PORT=3000
BATCH_WEB_PORT=8082
BATCH_WEB_MANAGEMENT_PORT=8083
BATCH_PROCESSOR_PORT=8084
BATCH_PROCESSOR_MANAGEMENT_PORT=8085
MOCK_API_PORT=3001
PROMETHEUS_PORT=9090
GRAFANA_PORT=3002

# ===========================================
# JWT Security
# ===========================================
JWT_SECRET=your-secret-key-change-in-production-minimum-64-chars

# ===========================================
# External API Keys
# ===========================================
# Kakao API (장소 검색 - REST API Key)
KAKAO_API_KEY=your_kakao_rest_api_key

# Naver Place API (장소 수집 배치에서 사용)
NAVER_CLIENT_ID=your_naver_client_id
NAVER_CLIENT_SECRET=your_naver_client_secret

# OpenAI API (선택사항 - AI 텍스트 생성)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-3.5-turbo
IS_OPENAI_ACTIVE=false


# ===========================================
# Email Configuration (SMTP)
# ===========================================
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your_email@gmail.com
MAIL_PASSWORD=your_app_specific_password
MAIL_SMTP_AUTH=true
MAIL_SMTP_STARTTLS=true
MAIL_SMTP_STARTTLS_REQUIRED=true
MAIL_SMTP_SSL_TRUST=smtp.gmail.com
MAIL_DEBUG=false

# ===========================================
# AI Model Configuration
# ===========================================
# Embedding Service URL (FastAPI server with kanana-nano-2.1b-embedding)
# Docker: http://host.docker.internal:2000 (when Python server runs on host)
# Local: http://localhost:2000
EMBEDDING_SERVICE_URL=http://host.docker.internal:2000

# Embedding model name
EMBEDDING_MODEL=kanana-nano-2.1b-embedding

# Text generation model (OpenAI or other service)
LLM_OPENAI_ACTIVE=false
LLM_OPENAI_API_KEY=
LLM_OPENAI_MODEL=gpt-3.5-turbo

# ===========================================
# Web Crawler Configuration (Python 서버)
# ===========================================
CRAWLER_SERVER_URL=http://localhost:5000
CRAWLER_API_PATH=/api/crawl
CRAWLER_ENHANCE_WITH_GOOGLE=false

# ===========================================
# Image Storage Configuration
# ===========================================
# 이미지 프로세서 URL (Node.js 이미지 프로세싱 서버)
# Docker/Production: http://100.99.236.50:5200
# Local: http://localhost:5200
IMAGE_PROCESSOR_URL=http://100.99.236.50:5200

# ===========================================
# Batch Job Configuration
# ===========================================
BATCH_CHUNK_SIZE=10
BATCH_SKIP_LIMIT=10000
API_PAGE_SIZE=100
API_MAX_PAGES=50
API_TIMEOUT=30
APP_BATCH_AUTO_START=true
APP_BATCH_SCHEDULING_ENABLED=true
APP_BATCH_SCHEDULING_CRON=0 */1 * * * ?
APP_BATCH_CHUNK_SIZE=50
APP_BATCH_CONTINUOUS_ENABLED=true
MAX_CONCURRENCY=4

# ===========================================
# Recommendation Algorithm Weights
# ===========================================
# 추천 알고리즘 파라미터
MOHE_TOP_K=100
MOHE_MIN_PLACES_THRESHOLD=50

# 유사도 가중치
MOHE_WEIGHT_JACCARD=0.7
MOHE_WEIGHT_COSINE=0.3

# MBTI 가중치
MOHE_WEIGHT_MBTI_BOOST=0.3
MOHE_WEIGHT_POPULARITY_PENALTY=0.1
MOHE_WEIGHT_SAME_MBTI=2.0
MOHE_WEIGHT_DIFF_MBTI=1.0

# 시간 감쇠 함수
MOHE_TIME_DECAY_TAU_DAYS=30

# 기능 플래그
MOHE_MBTI_SPECIFIC_ENABLED=false
MOHE_DIVERSITY_ENABLED=true

# ===========================================
# Mock Location (Dev/Test Environment)
# ===========================================
# 개발 환경에서 위치를 강제로 고정할 때 사용
#
# ⚠️ 중요: 이 값이 설정되어 있으면 API 파라미터 무시하고 이 값 강제 사용
# - 설정되어 있음 (예: MOCK_LATITUDE=37.5636) → ENV 값 강제 사용
# - 설정되어 있지 않음 (주석 처리 또는 삭제) → API 파라미터 사용
#
# 사용 예시:
# 1. 개발 중 특정 위치로 테스트 고정: 아래 주석 해제하고 값 설정
# 2. 프로덕션 또는 API 파라미터 사용: 아래 주석 처리 또는 삭제
#
# 주요 위치 좌표:
# - 서울 중구 (명동, 시청): 37.5636, 126.9976
# - 강남역: 37.4979, 127.0276
# - 홍대입구: 37.5563, 126.9227
# - 서울역: 37.5547, 126.9707
# - 광화문: 37.5760, 126.9769
#
# 현재 설정: 서울 중구로 강제 고정
MOCK_LATITUDE=37.5636
MOCK_LONGITUDE=126.9976

# ===========================================
# Spring Configuration
# ===========================================
SPRING_PROFILES_ACTIVE=docker
ENVIRONMENT=production
LOG_LEVEL=INFO

# ===========================================
# Monitoring (Grafana)
# ===========================================
GRAFANA_PASSWORD=admin
