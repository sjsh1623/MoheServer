# ===========================================
# Mohe Platform - Environment Configuration
# ===========================================
# IMPORTANT: Copy this file to .env and fill in your actual values
# DO NOT commit .env file to git (already in .gitignore)

# ===========================================
# Database Configuration
# ===========================================
# Database connection settings
DB_HOST=100.99.236.50
DB_PORT=16239
DB_NAME=mohe_db
DB_USERNAME=mohe_user
DB_PASSWORD=mohe_password

# Docker-specific PostgreSQL settings
POSTGRES_DB=mohe_db
POSTGRES_USER=mohe_user
POSTGRES_PASSWORD=mohe_password
POSTGRES_PORT=5432

# ===========================================
# Service Ports
# ===========================================
BACKEND_PORT=8080
FRONTEND_PORT=3000
BATCH_WEB_PORT=8082
BATCH_WEB_MANAGEMENT_PORT=8083
BATCH_PROCESSOR_PORT=8084
BATCH_PROCESSOR_MANAGEMENT_PORT=8085
MOCK_API_PORT=3001
PROMETHEUS_PORT=9090
GRAFANA_PORT=3002

# ===========================================
# JWT Security
# ===========================================
JWT_SECRET=your-secret-key-change-in-production-minimum-64-chars

# ===========================================
# External API Keys
# ===========================================
# Kakao API (장소 검색 - REST API Key)
KAKAO_API_KEY=your_kakao_rest_api_key

# Naver Place API (장소 검색)
NAVER_CLIENT_ID=your_naver_client_id
NAVER_CLIENT_SECRET=your_naver_client_secret

# OpenAI API (텍스트 생성)
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-3.5-turbo
IS_OPENAI_ACTIVE=false

# Google Places API (장소 상세정보)
GOOGLE_PLACES_API_KEY=your_google_places_api_key

# Google Custom Search (검색 엔진)
GOOGLE_CUSTOM_SEARCH_API_KEY=
GOOGLE_CUSTOM_SEARCH_ENGINE_ID=

# Gemini API (이미지 생성)
GEMINI_API_KEY=your_gemini_api_key
GEMINI_BASE_URL=https://generativelanguage.googleapis.com/v1beta

# OpenWeatherMap API (날씨)
OPENWEATHERMAP_API_KEY=your_openweathermap_api_key

# ===========================================
# 정부 공공데이터 API Keys
# ===========================================
GOVT_API_KEY=your_govt_api_key_here
VWORLD_API_KEY=your_vworld_api_key_here
SGIS_API_KEY=your_sgis_api_key_here

# ===========================================
# Email Configuration (SMTP)
# ===========================================
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your_email@gmail.com
MAIL_PASSWORD=your_app_specific_password
MAIL_SMTP_AUTH=true
MAIL_SMTP_STARTTLS=true
MAIL_SMTP_STARTTLS_REQUIRED=true
MAIL_SMTP_SSL_TRUST=smtp.gmail.com
MAIL_DEBUG=false

# ===========================================
# Ollama Configuration (AI 모델)
# ===========================================
# Ollama 서버 URL (Docker 환경: http://ollama:11434)
OLLAMA_HOST=http://ollama:11434
OLLAMA_BASE_URL=http://localhost:11434

# Kanana AI 모델 설정
# - Hugging Face에서 다운로드한 모델을 Modelfile로 Ollama에 등록
# - 모델명: kanana-instruct (한국어 최적화 모델)
LLM_OLLAMA_MODEL=kanana-instruct
OLLAMA_TEXT_MODEL=kanana-instruct

# 임베딩 모델 (장소 추천 시스템용)
OLLAMA_EMBEDDING_MODEL=mxbai-embed-large:latest

# Ollama API 타임아웃 (초)
OLLAMA_TIMEOUT=120

# OpenAI 사용 여부 (Kanana AI 사용 시 false)
LLM_OPENAI_ACTIVE=false
LLM_OPENAI_API_KEY=
LLM_OPENAI_MODEL=gpt-3.5-turbo

# ===========================================
# Web Crawler Configuration (Python 서버)
# ===========================================
CRAWLER_SERVER_URL=http://localhost:5000
CRAWLER_API_PATH=/api/crawl
CRAWLER_ENHANCE_WITH_GOOGLE=false

# ===========================================
# Image Storage Configuration
# ===========================================
# 이미지 저장 방식 선택
# - Mac Mini (이미지 서버): MOHE_IMAGE_USE_REMOTE=false (로컬 저장)
# - MacBook Pro (워커): MOHE_IMAGE_USE_REMOTE=true (Mac Mini로 전송)

# 이미지 저장 경로 (로컬 저장 시)
MOHE_IMAGE_STORAGE_PATH=/images

# 원격 이미지 서버 사용 여부
# - Mac Mini (이미지 서버): false (로컬에 직접 저장)
# - 워커 머신: true (Mac Mini로 API 전송)
MOHE_IMAGE_USE_REMOTE=false

# 원격 이미지 서버 URL (워커에서만 사용)
# Mac Mini IP 주소와 포트를 설정
# 예시: http://100.99.236.50:8080
MOHE_IMAGE_SERVER_URL=http://100.99.236.50:8080

# ===========================================
# Batch Job Configuration
# ===========================================
BATCH_CHUNK_SIZE=10
BATCH_SKIP_LIMIT=10000
API_PAGE_SIZE=100
API_MAX_PAGES=50
API_TIMEOUT=30
APP_BATCH_AUTO_START=true
APP_BATCH_SCHEDULING_ENABLED=true
APP_BATCH_SCHEDULING_CRON=0 */1 * * * ?
APP_BATCH_CHUNK_SIZE=50
APP_BATCH_CONTINUOUS_ENABLED=true
MAX_CONCURRENCY=4

# ===========================================
# Recommendation Algorithm Weights
# ===========================================
# 추천 알고리즘 파라미터
MOHE_TOP_K=100
MOHE_MIN_PLACES_THRESHOLD=50

# 유사도 가중치
MOHE_WEIGHT_JACCARD=0.7
MOHE_WEIGHT_COSINE=0.3

# MBTI 가중치
MOHE_WEIGHT_MBTI_BOOST=0.3
MOHE_WEIGHT_POPULARITY_PENALTY=0.1
MOHE_WEIGHT_SAME_MBTI=2.0
MOHE_WEIGHT_DIFF_MBTI=1.0

# 시간 감쇠 함수
MOHE_TIME_DECAY_TAU_DAYS=30

# 기능 플래그
MOHE_MBTI_SPECIFIC_ENABLED=false
MOHE_DIVERSITY_ENABLED=true

# ===========================================
# Spring Configuration
# ===========================================
SPRING_PROFILES_ACTIVE=docker
ENVIRONMENT=production
LOG_LEVEL=INFO

# ===========================================
# Monitoring (Grafana)
# ===========================================
GRAFANA_PASSWORD=admin
